!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};!function(e){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}var o,n,a,u,c,i,l,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},m=1/0,y=0/0,s=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,g=/^0o[0-7]+$/i,v=parseInt,b="object"==typeof f&&f&&f.Object===Object&&f,h="object"==typeof self&&self&&self.Object===Object&&self,C=b||h||Function("return this")(),_=Object.prototype.toString,S=C.Symbol,w=Math.min,F=S?S.prototype:void 0,M=F?F.toString:void 0;function P(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function D(t){return"symbol"==typeof t||!!t&&"object"==typeof t&&"[object Symbol]"==_.call(t)}function O(t){if("number"==typeof t)return t;if(D(t))return y;if(P(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=P(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var r=p.test(t);return r||g.test(t)?v(t.slice(2),r?2:8):d.test(t)?y:+t}function W(t){return null==t?"":function(t){if("string"==typeof t)return t;if(D(t))return M?M.call(t):"";var e=t+"";return"0"==e&&1/t==-m?"-0":e}(t)}var j=(o=Math.round,function(t,e){var r,n,a;if(t=O(t),e=w((a=(n=(r=e)?(r=O(r))===m||r===-m?(r<0?-1:1)*17976931348623157e292:r==r?r:0:0===r?r:0)%1,n==n?a?n-a:n:0),292)){var u=(W(t)+"e").split("e");return+((u=(W(o(u[0]+"e"+(+u[1]+e)))+"e").split("e"))[0]+"e"+(+u[1]-e))}return o(t)}),B={amount:{value:"amount",decimalSymbol:".",groupSymbol:",",format:"amount"},amount_no_decimals:{value:"amount_no_decimals",decimalSymbol:"",groupSymbol:",",format:"amount_no_decimals"},amount_with_comma_separator:{value:"amount_with_comma_separator",decimalSymbol:",",groupSymbol:".",format:"amount_with_comma_separator"},amount_no_decimals_with_comma_separator:{value:"amount_no_decimals_with_comma_separator",decimalSymbol:"",groupSymbol:".",format:"amount_no_decimals_with_comma_separator"},amount_with_apostrophe_separator:{value:"amount_with_apostrophe_separator",decimalSymbol:".",groupSymbol:"'",format:"amount_with_apostrophe_separator"},amount_no_decimals_with_space_separator:{value:"amount_no_decimals_with_space_separator",decimalSymbol:"",groupSymbol:" ",format:"amount_no_decimals_with_space_separator"},amount_with_space_separator:{value:"amount_with_space_separator",decimalSymbol:",",groupSymbol:" ",format:"amount_with_space_separator"}},N=/.*\{\{(.*)\}\}/,x=/(\{\{.*\}\})/,T="amount";(n=a||(a={})).PREFIX="prefix",n.SUFFIX="suffix";var I=Object.entries(B).map(function(t){return(function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,o,n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a=[],u=!0,c=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return a}}(t,2)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);if("Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return r(t,e)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].value}),E=new Map,R=new Map,Y=new Map,$=new Map,A=new Map,X=new Map,G=new Map,U=new Map,k=new Map,q=function(){E.clear(),R.clear(),Y.clear(),$.clear(),A.clear(),X.clear(),G.clear(),U.clear(),k.clear()},z=function(t){i=t},H=function(){return i},J=function(){return l},K=function(t){return I.includes(t||"")},L=function(t){var e=t.match(N);if(e&&e.length){var r=(e[1]||"").trim();return K(r)?B[r]:null}return null},Q=function(t,e,r){var o,n=L(e),a=null===(o=(r?X:A).get(t))||void 0===o?void 0:o.format;return n||(K(a)?B[a]:B[T])},V=function(t){return L(t)||B[T]},Z=function(t,e){E.set(t,e)},tt=function(t,e){R.set(t,e)},te=function(t,e,r){var o,n,a=t.match(N);return null!=a&&a.length&&I.includes((null==a?void 0:null===(o=a[1])||void 0===o?void 0:o.trim())||"")?t:(null===(n=(r?X:A).get(e))||void 0===n?void 0:n.origin)||"{{amount}}"},tr=function(t,e){var r=V(e).format;A.set(t,{format:r,origin:e})},to=function(t,e){var r=V(e).format;X.set(t,{format:r,origin:e})},tn=function(t,e){var r=Q(t,e,!1),o=r.format,n=r.decimalSymbol,a=r.groupSymbol;U.set(t,n),k.set(t,a),Y.set(t,{format:o,origin:te(e,t,!1)})},ta=function(t,e){var r=Q(t,e,!0),o=r.format,n=r.decimalSymbol,a=r.groupSymbol;U.set(t,n),k.set(t,a),$.set(t,{format:o,origin:te(e,t,!0)})},tu=function(t,e){if(!e){console.error("".concat(t,"无对应的messageWithoutDefaultCurrency配置"));return}(null==e?void 0:e.trimStart().indexOf("{{"))>0?G.set(t,a.PREFIX):G.set(t,a.SUFFIX)},tc=function(t){var e=J().find(function(e){return e.currencyCode===t});if(!e){console.error("获取".concat(t,"对应的货币配置失败"));return}var r=e.messageWithoutDefaultCurrency,o=e.messageWithCurrency,n=e.messageWithoutCurrency,a=e.messageWithDefaultCurrency,u=e.currencyCode,c=e.rate,i=void 0===c?2:c,l=e.currencySymbol;Z(u,i),tt(u,l),tu(u,r),tr(u,r),to(u,a),tn(u,n),ta(u,o)},ti=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.replace(x,t)},tl=function(t,e,r){var o,n,a,u,c=B[e],i=c.groupSymbol,l=c.decimalSymbol,f=t<0,m=(a=j(f?-t:t,r),0!==r&&l?(o=Math.floor(a),n="".concat(j(a-o,r)).replace(/^0?\.?/,"").padEnd(r,"0")):(o=j(a),n=""),{integerPart:o,fractionPart:n}),y=m.fractionPart,s=(u=m.integerPart,"".concat(u||0).replace(/(\d)(?=(?:\d{3})+$)/g,"$1".concat(i)));return{integer:"".concat(f?"-":"").concat(s),fraction:y,groupSymbol:i,decimalSymbol:l}},tf=function(t,e){var r=(null==e?void 0:e.code)||u||"CNY";Y.get(r)||tc(r);var o=t_(r),n=tC(r),a=tg(r),c=tv(r),i=(Y.get(r)||{}).format,l=tl(t,K(i)?i:T,2),f=l.integer,m=l.fraction,y=[],s=(null==f?void 0:f.split(o))||[];return s.forEach(function(t,e){y.push({type:"integer",value:t}),e!==s.length-1&&y.push({type:"group",value:o})}),y.push({type:"decimal",value:n}),y.push({type:"fraction",value:null==m?void 0:m.trim()}),"prefix"===c?y.unshift({type:"currency",value:a}):y.push({type:"currency",value:a}),y},tm=function(t){var e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CNY",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,a=arguments.length>3?arguments[3]:void 0,u=a||H();return o===n?t:t*(null!==(e=null==u?void 0:u[n])&&void 0!==e?e:1)/(null!==(r=null==u?void 0:u[o])&&void 0!==r?r:1)},ty=function(t,e,r){var o=e?$:Y,n=e?td:tp,a=r||{},i=a.from,l=void 0===i?u:i,f=a.to,m=void 0===f?c:f,y=a.currencyRates;return o.get(l)||tc(l),o.get(m)||tc(m),n(tm(t,l,m,y||H()),{code:m})},ts=function(t){var e,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,n=r?$:Y,a=(null==o?void 0:o.code)||u||"CNY";n.get(a)||tc(a);var c=n.get(a)||{},i=c.format,l=c.origin,f=null!==(e=null==o?void 0:o.digits)&&void 0!==e?e:2,m=tl(t/Math.pow(10,f),K(i)?i:T,f),y=m.integer,s=m.fraction,d=m.decimalSymbol;return ti(d&&f?"".concat(y).concat(d).concat(null!=s?s:""):y,l)},td=function(t,e){return ts(t,!0,e)},tp=function(t,e){return ts(t,!1,e)},tg=function(t){return Y.get(t)||tc(t),R.get(t)},tv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CNY";return Y.get(t)||tc(t),G.get(t)},tb=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("number"!=typeof t?Number(t):t)/Math.pow(10,e)},th=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return j(("number"!=typeof t?Number(t):t)*Math.pow(10,e),0)},tC=function(t){return Y.get(t)||tc(t),U.get(t)},t_=function(t){return Y.get(t)||tc(t),k.get(t)};e.convertCalc=tm,e.convertFormat=function(t,e){return ty(t,!0,e)},e.convertFormatWithoutCurrency=function(t,e){return ty(t,!1,e)},e.covertCalc=tm,e.defaultCurrency="CNY",e.defaultCurrencyDigit=2,e.defaultPresentDigit=2,e.format=td,e.formatCurrency=function(t){return tb(t,2)},e.formatMoneyWithoutCurrency=function(t,e){var r=(null==e?void 0:e.code)||u||"CNY";Y.get(r)||tc(r);var o=(Y.get(r)||{}).format,n=tl(t/100,K(o)?o:T,2),a=n.integer,c=n.fraction,i=n.decimalSymbol;return i?"".concat(a).concat(i).concat(null!=c?c:""):a},e.formatNumber=tb,e.formatPercent=function(t){return tb(t,2)},e.formatWithoutCurrency=tp,e.getConvertPrice=function(t,e){var r=e||{},o=r.from,n=r.code,a=r.to,l=r.currencyRates,f=o||u||"CNY";Y.get(f)||tc(f);var m=a||n||c;Y.get(m)||tc(m);var y=tf(tm(tb(t),f,m,l||i),{code:m}),s={group:"",integer:"",decimal:"",fraction:"",symbolOrder:"",currencySymbol:""};return s.symbolOrder=tv(m),y.forEach(function(t){var e=t.value||"";(null==t?void 0:t.type)==="currency"&&(s.currencySymbol=e),(null==t?void 0:t.type)==="integer"&&(s.integer?s.integer="".concat(s.integer).concat(s.group||"").concat(e):s.integer=e),(null==t?void 0:t.type)==="group"&&(s.group=e),(null==t?void 0:t.type)==="decimal"&&(s.decimal=e),(null==t?void 0:t.type)==="fraction"&&(s.fraction=e)}),s},e.getCurrencyConfig=J,e.getCurrencyRates=H,e.getDecimalSymbolByCode=tC,e.getDefaultToCurrency=function(){return c},e.getDigitsByCode=function(t){return Y.get(t)||tc(t),E.get(t)},e.getFormatParts=tf,e.getGroupSymbolByCode=t_,e.getStoreCurrency=function(){return u},e.getSymbolByCode=tg,e.getSymbolOrderByCode=tv,e.parseCustomFormat=Q,e.parseCustomFormatWithCurrency=ta,e.parseCustomFormatWithoutCurrency=tn,e.parseDefaultFormat=V,e.parseDefaultFormatWithCurrency=to,e.parseDefaultFormatWithoutCurrency=tr,e.setCurrencyConfig=function(t){var e={};(l=t).forEach(function(t){e[t.currencyCode]=t.exchangeRate}),z(e),"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)&&q()},e.setCurrencyRates=z,e.setDefaultToCurrency=function(t){c=t},e.setStoreCurrency=function(t){u=t},e.unformatCurrency=function(t){return th(t,2)},e.unformatNumber=th,e.unformatPercent=function(t){return th(t,2)},Object.defineProperty(e,"__esModule",{value:!0})}(e.exports);var r=e.exports;window["@sl/currency-tools-core"]={formatMoneyWithoutCurrency:r.formatMoneyWithoutCurrency,formatWithoutCurrency:r.formatWithoutCurrency,getGroupSymbolByCode:r.getGroupSymbolByCode,setCurrencyConfig:r.setCurrencyConfig,setStoreCurrency:r.setStoreCurrency,setDefaultToCurrency:r.setDefaultToCurrency,getConvertPrice:r.getConvertPrice,convertFormat:r.convertFormat,covertCalc:r.covertCalc,convertFormatWithoutCurrency:r.convertFormatWithoutCurrency,format:r.format,unformatNumber:r.unformatNumber,formatNumber:r.formatNumber,unformatCurrency:r.unformatCurrency,unformatPercent:r.unformatPercent,formatCurrency:r.formatCurrency,formatPercent:r.formatPercent,getDigitsByCode:r.getDigitsByCode,getSymbolByCode:r.getSymbolByCode,getSymbolOrderByCode:r.getSymbolOrderByCode,getDecimalSymbolByCode:r.getDecimalSymbolByCode,getFormatParts:r.getFormatParts}}();
